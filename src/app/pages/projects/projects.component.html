<!-- Main Content -->
<div class="flex-1 p-8 ml-64 w-fit bg-rose-50 min-h-screen">
  <h2 class="text-3xl font-bold text-gray-700">Welcome to the Projects Page</h2>

  <!-- Add Project Button -->
  <div class="flex justify-end my-6">
    <button (click)="openAddProjectModal()"
      class="bg-green-600 text-white px-5 py-2 rounded-lg shadow-md hover:bg-green-700 transition">
      + Add Project
    </button>
  </div>

  <!-- Modal -->
  <div *ngIf="showModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50">
    <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-lg">
      <h2 class="text-xl font-bold mb-4 text-gray-700">
        {{ isEditMode ? 'Edit Project' : 'Add New Project' }}
      </h2>

      <input [(ngModel)]="newProject.name" placeholder="Project Name"
        class="w-full p-3 border rounded-lg mb-3 focus:ring-2 focus:ring-blue-500 outline-none">

      <textarea [(ngModel)]="newProject.description" placeholder="Project Description"
        class="w-full p-3 border rounded-lg mb-3 focus:ring-2 focus:ring-blue-500 outline-none"></textarea>

      <select [(ngModel)]="newProject.status" class="w-full p-3 border rounded-lg mb-4 focus:ring-2 focus:ring-blue-500 outline-none">
        <option value="Pending">Pending</option>
        <option value="In Progress">In Progress</option>
        <option value="Completed">Completed</option>
      </select>

      <div class="flex justify-end space-x-2">
        <button *ngIf="isEditMode" (click)="editProject()"
          class="bg-yellow-500 text-white px-5 py-2 rounded-lg shadow-md hover:bg-yellow-600 transition">
          Update
        </button>
        <button *ngIf="!isEditMode" (click)="saveProject()"
          class="bg-blue-600 text-white px-5 py-2 rounded-lg shadow-md hover:bg-blue-700 transition">
          Save
        </button>
        <button (click)="closeModal()" class="bg-gray-400 text-white px-5 py-2 rounded-lg shadow-md hover:bg-gray-500 transition">
          Cancel
        </button>
      </div>
    </div>
  </div>

  <!-- Projects Table -->
  <div *ngIf="projects.length > 0; else noProjects" class="bg-white shadow-md rounded-lg overflow-hidden p-6">
    <h2 class="text-2xl font-bold mb-4 text-gray-700">Project Management</h2>

    <div class="flex justify-between items-center mb-4">
      <input [(ngModel)]="searchQuery" placeholder="Search projects"
        class="p-3 border rounded-lg w-full md:w-2/3 focus:ring-2 focus:ring-blue-500 outline-none shadow-sm">
    </div>

    <table class="w-full table-auto border-collapse">
      <thead class="bg-gray-200 text-gray-700 uppercase text-sm">
        <tr>
          <th class="px-6 py-3 text-left">Project Name</th>
          <th class="px-6 py-3 text-left">Description</th>
          <th class="px-6 py-3 text-left">Status</th>
          <th class="px-6 py-3 text-left">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let project of filteredProjects(); trackBy: trackById" class="border-b hover:bg-gray-100">
          <td class="px-6 py-3 break-words">{{ project.name }}</td>
          <td class="px-6 py-3 break-words">{{ project.description }}</td>
          <td class="px-6 py-3 text-blue-500 font-semibold">{{ project.status }}</td>
          <td class="px-6 py-3 flex space-x-3">
            <button (click)="openEditProjectModal(project)"
              class="bg-yellow-500 text-white px-4 py-2 rounded-lg shadow hover:bg-yellow-600 transition">
              ‚úèÔ∏è Edit
            </button>
            <button (click)="deleteProject(project.id)"
              class="bg-red-500 text-white px-4 py-2 rounded-lg shadow hover:bg-red-600 transition">
              üóëÔ∏è Delete
            </button>
          </td>
        </tr>
      </tbody>

    </table>
  </div>

  <ng-template #noProjects>
    <p class="text-gray-500 text-center">No projects found.</p>
  </ng-template>
</div>
